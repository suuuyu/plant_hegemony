# plant_hegemony
## introduction

![snapshot](shot.png)
>~~拾取掉落的子弹箱，依靠时有时无的补给，打败邪恶小🛸，躲避迎面而来的陨石，最终和神秘天王来一场殊死决战吧~~

这是一个基于h5和 `typescript`的飞机大战小游戏，使用h5的`requestAnimationFrame`接口进行canvas渲染，是基于https://github.com/gd4Ark/star-battle改进的

## 代码结构说明：
* 场景类：Scene：
    1. canvas的初始化，并提供canvas绘制接口
    2. 集成游戏逻辑的update函数，并向`requestAnimationFrame`注册update函数
        > 把游戏的逻辑判断等操作向上集成到update函数中每帧调用一次
    3. 提供暂停，开始游戏等接口
* 控制类：Controller:
    1. 游戏数据初始化
    2. 游戏角色初始化
    3. 游戏逻辑判断:
        * 碰撞检测
        * 道具拾取检测
        * 根据当前分数，升级游戏难度
* 工具类：Util：
    1. 提供判断是否为数组，是否为图片，数组随机取值等公共方法
    2. 提供加载图片和音频的方法
    3. 提供定时器，其他类可以将更新方法注册到定时器中，定时器将以1秒60次的频率调用即
* 配置类：Config：
    定义了游戏的一些基本配置：包括：
    1. 游戏元素的长宽， 运行速度，动画，图片，坐标，生命值
	2. 荧幕的长宽
    3. 图片资源和音频资源的位置
* 资源类：Resource：
    负责音频资源和图片资源的加载
* 频率类：Frequence：
    通常作为游戏元素的一个参数，只有当频率类被`update`调用的次数累计达到频率阈值的时候，才会触发回调函数
* 动画类：Animation：
    __需要接收一个频率类作为参数__
    每次频率类的函数回调时，将执行一次操作，通常是在指定坐标播放某一张帧图片





## Setting Explanation
1. `w, a, s, d`移动控制，全自动开火，`space`召唤分身小弟，`G`召唤🦈魔灵
2. 拾取随机掉落的补给子弹包，可以获得武器升级，武器最高可达4级，武器满级后，将获得酷炫环绕特效~~以展示您强大的威仪~~，**注意，当您收到攻击时，武器等级会自动下降一级**
3. 拾取加油包，可以获得生命值加成，遭到攻击时生命值会下降，当您的生命值超过50%时，才可以释放召唤小弟技能。
4. 普通子弹击败敌人，可获得死亡敌人生命值的一半作为能量加成。
## 技能详解
* 召唤小弟
    > * 召唤小弟帮忙攻击，也可以帮助自己在必要的时候挡子弹 
    > * 召唤小弟时，将消耗自身当前一半的生命值召唤三个小弟，每个小弟的生命值跟自身当前生命值有关，小弟无法控制，会自主攻击和移动
* 🦈魔灵攻击
    > * 毁天灭地的神技，耗尽所有能量在机身旁边映射三条深渊巨🦈的投影，巨🦈投影在短暂的一秒蓄力之后会向前疯狂啃食，吞噬遇到的一切，对途径的所有敌人造成巨量伤害。
    > * 巨🦈环绕：锁定技，开始投影时，巨🦈真灵将传送自身力量到目标地点生成投影在一秒蓄力时间内由于巨🦈能量逐渐聚集，威力霸道强劲，所以此时所有靠近投影区域的敌人都将直接灰飞烟灭。
## 难度升级说明
* 难度1：陨石被神秘天王赋予了邪恶能量，将在未击中的情况下二次反弹
* 难度2：邪恶小🛸刷新数量增加一倍
* 难度3：陨石刷新数量增加一倍
* 难度4：神秘天王亲临战场🐱‍👤s
## Project setup
```
npm install
```

### Compiles and hot-reloads for development
```
npm run serve
```

### Compiles and minifies for production
```
npm run build
